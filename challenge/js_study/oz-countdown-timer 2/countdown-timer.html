<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./images/oz_icon.png" />
    <title>ì˜¤ì¦ˆì½”ë”©ìŠ¤ì¿¨ | ì¹´ìš´íŠ¸ë‹¤ìš´ íƒ€ì´ë¨¸</title>
    <style>

    div {
      box-sizing: border-box;
    }

    .footer {
      height: 10vh;
      width: 100%;
      font-size: 12px;
      text-align: center;
    }

    .footer a {
      color: hsl(282, 100%, 21%);
      text-decoration: none;
    }

    .header {
      height: 10vh;
      width: 100%;
    }

    .container {
      position: relative;
      height: 80vh;
      width: 100%;
    }

    /* container__topLayer */
    .container__topLayer {
      height: 90%;
      width: 100%;
      background-color: aliceblue;
      margin: 0 auto;
      justify-content: center;
    }

    .container__bottomLayer {
      height: 10%;
      width: 100%;
      background-color: honeydew;
    }

    .flex {
      display: flex;
    }

    .frame {
      width: 30%;
      height: 100%;
      flex: 1;
    }

    /* img size */
    .display {
      /* position: relative; */
      width: 100%;
      height: 80%;
      overflow: hidden;
    }

    
    .display img {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .display__date{
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 13%;
      /* background-color: blueviolet; */
      opacity: 0.4;
    }
    
    .dateAddBtn{
      position: sticky;
      bottom: 0;
      font-size: 35px;
      border: 0;
      background-color:transparent;
      box-shadow: 5px 8px 15px rgb(30, 23, 23);
      border-radius: 10px;
      z-index: 22;
    }

    /* .date__popup{
      width: 600px;
      height: 400px;
      top: 50%;
      left: 50%;
      position: absolute;
      background-color: white;
      border: 1px solid black;
      transform: translate(-50%, -50%);
      z-index: 99;
    } */

    .date__popup {
      width: 600px;
      height: 400px;
      position: fixed; /* Use fixed positioning to make sure it stays in view */
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: white;
      border: 1px solid black;
      z-index: 99;
    }

    .date__popupbackLayer{
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      background-color: rgba(14, 13, 13, 0.8);
      z-index: 109;
    }


    .date__popup__content{
      width: 100%;
      height: 100%;
      justify-content: space-evenly;
      align-items: center;
      margin: 0, auto;
    }

    </style>
  </head>
  <body>
    <div class="header">header</div>
    <div class="container">
      <div class="container__topLayer flex">
        <!-- photo-->
        <div class="frame">
          <div class="display">
            <img src="/js_study/oz-countdown-timer 2/images/n02100583_9960.jpg">
            <button class="dateAddBtn">ğŸ“…</button>
            <div class="display__date">
            </div>
          </div>
          <div class="display__date__content">
            <input type="date">
          </div>
        </div>
        <!-- photo-->
        <div class="frame">
          <div class="display">
            <img src="/js_study/oz-countdown-timer 2/images/n02107312_3474.jpg">
            <button class="dateAddBtn">ğŸ“…</button>
            <div class="display__date">
            </div>
          </div>
          <div class="display__date__content">
            <input type="date">
          </div>
        </div>
        <!-- photo-->
        <div class="frame">
          <div class="display">
            <img src="/js_study/oz-countdown-timer 2/images/mamehiko02.jpg">
            <button class="dateAddBtn">ğŸ“…</button>
            <div class="display__date">
            </div>
          </div>
          <div class="display__date__content">
            <input type="date">
          </div>
        </div>
      </div>
      <div class="container__bottomLayer">bottomLayer</div> 
    </div>
    <div class="footer">
      Â© 2023. <a href="https://ozcodingschool.com/" target="_blank">ozcodingschool</a>. All rights
      reserved. Developed by <a href="#">[ìˆ˜ê°•ìƒ ì´ë¦„]</a>.
    </div>
    <script>
      // JavaScriptë¡œ íƒ€ì´ë¨¸ êµ¬í˜„
      
      const container = document.querySelector(".container");
      const dateAddBtnArr = document.querySelectorAll(".dateAddBtn");


      [].forEach.call(dateAddBtnArr, function(element){
        element.addEventListener("click", dateBtnClick, false);
      });

      // let intervalID = setInterval(dateHandler, 1000)


      // ë‹¬ë ¥ì„ í´ë¦­í•˜ë©´ ìƒì„¸ ì¼ìë¥¼ ì§€ì •í•  íŒì—…ì´ ë‚˜ì˜¨ë‹¤.
      // ë‹¬ë ¥ í´ë¦­í•˜ë©´ ê³„ì‚°ëœ ë‚ ì§œê°€ ì‚¬ì§„ ë°‘ì— ë‚˜ì™€ì•¼ë¨
      function dateBtnClick(e){
        console.dir(e.target.parentElement.nextElementSibling)
        console.dir(e.target)

        const dateContentDiv = e.target.parentElement.nextElementSibling

        const popupDiv = document.createElement("div")
        const popupbackLayer = document.createElement("div")
        popupbackLayer.className = "date__popupbackLayer"
        popupDiv.className = "date__popup"
        
        // date_popupì— í‘œì‹œë  ë‚´ìš©
        popupDiv.innerHTML = `<div class='date__popup__content flex'>
          <div class="date__popup__content__display">ë‚ ì§œê°€ í‘œì‹œë  ê³³</div>
          <div class="date__popup__content__input">
            <input type="date" onchange='dateHandler(event);' />
            <button class="closeBtn" onclick='closeBtnClick(event);'>ë‹«ê¸°</button>
          </div>
          
          </div>`;


        popupbackLayer.appendChild(popupDiv)
        //container.appendChild(popupbackLayer) // ì»¨í…Œì´ë„ˆ div ë°‘ìœ¼ë¡œ ëª¨ë‹¬ì„ ë¶™ì´ë‹ˆê¹Œ ë‚ ì§œ ì •ë³´ ì „ë‹¬í•´ì£¼ê¸°ê°€ ë”ìš± ì–´ë ¤ì›Œì§
        dateContentDiv.appendChild(popupbackLayer)

      }

      function dateHandler(e){
        // console.log(e.target.parentElement.parentElement.parentElement.parentElement.parentElement) // ì–´ë–»ê²Œ í•´ì„œ ë‚˜ì˜¤ê¸´ ë‚˜ì˜¤ëŠ”ë° ì´ê²Œ ë§ë‚˜..?.....
        // const targetDiv = e.target.parentElement.parentElement.parentElement.parentElement.parentElement
        // targetDiv.textContent = e.target.value

        // í˜„ì¬ ë‚ ì§œì™€ ì§€ì •í•œ ë‚ ì§œë¥¼ ë¹„êµí•œë‹¤.
        // í˜„ì¬ ë‚ ì§œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        /*
        Human Readable Time	/ Seconds
          1 Hour	3600 Seconds
          1 Day	86400 Seconds
          1 Week	604800 Seconds
          1 Month (30.44 days)	2629743 Seconds
          1 Year (365.24 days)	31556926 Seconds
          
          1 ë°€ë¦¬ì´ˆ = 1/1000ì´ˆ
          1ì´ˆ = 1000 ë°€ë¦¬ì´ˆ
          1ë¶„ = 60ì´ˆ (60*1,000 = 60,000 ë°€ë¦¬ì´ˆ)
          1ì‹œê°„ = 60ë¶„ (60 * 60 * 1,000 = 3,600,000 ë°€ë¦¬ì´ˆ)
          1ì¼ = 24ì‹œê°„ (24 * 60 * 60 * 1,000) // 86,400,000
        */

        console.log(e)
        console.dir(e)
        const targetDiv = e.target.parentElement.parentElement.parentElement.parentElement.parentElement

        const targetDate = new Date(e.target.value)
        
        let intervalID = setInterval(function(){
          const now = new Date()
          console.log("targetDate = " + targetDate)
  
          let targetDays = 0
          let targetHour = 0
          let targetMin = 0
          let targetSec = 0
          let leftTime = targetDate.getTime() - now.getTime()
  
          console.log("[" + targetDate.getTime()+"] - " + - + "["+now.getTime()+"] = " + leftTime)
  
          let days1 = 24 * 60 * 60 * 1000
          let hour1 = 60 * 60 * 1000
          let min1 = 60 * 1000
          let sec1 = 1000
  
          // ì¼, ì‹œ , ë¶„, ì´ˆ ë‹¨ìœ„ë¡œ ëº€ë‹¤.
  
          // nowTime ì´ 1ì´ˆ ë¯¸ë§Œì¼ ë•Œê¹Œì§€(?) ëŒë¦¬ë‚˜?...
  
          if( (leftTime / days1 ) > 1){ // ë‚¨ì€ ì‹œê°„ì„ í•˜ë£¨ë¡œ ë‚˜ëˆ„ì–´ì„œ ë‚˜ëˆ„ì–´ ë–¨ì–´ì§€ë©´ í•˜ë£¨ëŠ” ìˆëŠ”ê±°ë‹ˆê¹Œ..
            // ê·¸ ì¼ìˆ˜ë¥¼ ë„£ê³ , ê·¸ ì¼ìˆ˜ë§Œí¼ ë˜ ì—°ì‚°í•´ì„œ ë¹¼ë‚˜?
            targetDays = Math.floor(leftTime / days1) //Math.floor ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ ì‹œ ì´ìƒí•œ ê°’ì´ ë‚˜ì˜´... ê³„ì‚°ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.
            console.log("targetDays * days1 = " + targetDays * days1)
            leftTime -= (targetDays * days1)
  
            console.log("targetDay ë‚¨ì€ ì¼ìˆ˜ = " + targetDays)
            console.log("ë¹¼ê³  ë‚¨ì€ ì‹œê°„ = " + leftTime)
          }
          
          if( (leftTime / hour1 ) > 1){
            targetHour = Math.floor(leftTime / hour1)
            console.log(targetHour * hour1)
            leftTime -= targetHour * hour1
  
            console.log("targetDay ë‚¨ì€ ì‹œê°„ = " + targetHour)
            console.log("ë¹¼ê³  ë‚¨ì€ ì‹œê°„ = " + leftTime)
          }
  
          if( (leftTime / min1 ) > 1){
            targetMin = Math.floor(leftTime / min1)
            console.log(targetMin * min1)
            leftTime -= targetMin * min1
  
            console.log("targetMin ë‚¨ì€ ë¶„ = " + targetMin)
            console.log("ë¹¼ê³  ë‚¨ì€ ë°€ë¦¬ì´ˆ = " + leftTime)
          }
  
          if( (leftTime / sec1 ) > 1){
            targetSec = Math.floor(leftTime / sec1)
            console.log(targetSec * sec1)
            leftTime -= targetSec * sec1
  
            console.log("targetMin ë‚¨ì€ ì´ˆ = " + targetSec)
            console.log("ë¹¼ê³  ë‚¨ì€ ë°€ë¦¬ì´ˆ = " + leftTime)
          }
  
         
          targetDiv.textContent = `
            ë‚¨ì€ ì‹œê°„ : ${targetDays}ì¼ ${targetHour}ì‹œ ${targetMin}ë¶„ ${targetSec}ì´ˆ `

        }, 1000)


      }


      function closeBtnClick(e){
        console.log("closeBtn Clicked !")
        // ..... ì´ê²Œ ë§ë‚˜
        //const parentDiv = e.target.parentElement.parentElement.parentElement
        //parentDiv.remove()
        const parentDivBack= e.target.parentElement.parentElement.parentElement.parentElement
        parentDivBack.remove()

      }
      

    </script>
  </body>
</html>
