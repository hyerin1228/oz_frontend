<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>챌린지20 - js복습과제_성적표</title>
    <style>
        table, th, tr, td{
            border: 1px solid black;
        }

        table{
            width: 300px;
            text-align: center;
        }


    </style>
</head>
<body>
    
    <div class="container">
        <h1>떡잎 유치원 멀리뛰기 결과</h1>
        <div class="tableDiv">
        </div>
        <div class="display">
            <h1>75점이 넘는 사람 : </h1>
        </div>
    </div>

    <script>

        // - 기본 : 75점이 넘는 사람만 추출해서 화면에 나타내기(무작위)
        // - *심화 : 추출한 사람 중에서 점수가 높은 순으로 나열하기*


        // 1. 이름과 점수 테이블이 출력
        // 2. 75점이 넘는 사람 무작위 표시 -> 심화) 추출한 살마 중에서 점수가 높은 순으로 나열

        // 1. 
        // 각각의 인원에 대한 이름과 점수를 저장하는 배열을 만들고 정보를 저장한다.
        // 해당하는 정보에 따라서 테이블을 만든다.
        
        const tableDiv = document.querySelector(".tableDiv")
        const display = document.querySelector(".display")


        function Kindergartener(name, score){
            this.name = name;
            this.score = score;
        }

        let childArr = [
            new Kindergartener("짱구", 45),
            new Kindergartener("맹구", 75),
            new Kindergartener("철수", 95),
            new Kindergartener("훈이", 50),
            new Kindergartener("유리", 68),
            new Kindergartener("수지", 86)
        ]

        
        // 테이블을 만들건데 .. 어떻게?? 테이블 구조
        /*
            <table>
                <th>aaa</th>
                <tr> 한 줄
                    <td><dd>데이터칸
        
        */
        
        const table = document.createElement("table")
        const thName = document.createElement("th")
        const thScore = document.createElement("th")

        thName.textContent = "이름"
        thScore.textContent = "점수"

        table.appendChild(thName)
        table.appendChild(thScore)

        // tr은 각 인원만큼
        for(let i=0; i<childArr.length; i++){
            let lengthofkeys = Object.keys(childArr[i]).length
            //console.dir(childArr[i])
            const tr = document.createElement("tr")
            
            const tdName = document.createElement("td")
            const tdScore = document.createElement("td")
            tdName.textContent = childArr[i].name
            tdScore.textContent = childArr[i].score
                
            tr.appendChild(tdName)
            tr.appendChild(tdScore)
            
            table.appendChild(tr)
        }
        
        
        // 마지막으로 dom에 table 붙이기
        tableDiv.appendChild(table)



        // 2. 75점이 넘는 사람 무작위 표시 -> 심화) 추출한 살마 중에서 점수가 높은 순으로 나열
        
        // 75점이 넘는 사람 배열 따로 가져오고 거기서 무작위로(?) 담아보기
        let highscoreArr;
        highscoreArr = childArr.filter((item) => {
            return item.score >= 75
        })

        let sortArr = highscoreArr.sort((a, b) => b.score - a.score);
        const resultStr = document.createElement("h3")

        console.log(sortArr)
        console.log("keys :" + Object.keys(sortArr))
        console.log("entries :" + Object.entries(sortArr))

        sortArr.forEach(item => {
            resultStr.textContent += item.name +"["+ item.score + "] "
        })
        
        display.appendChild(resultStr)


        // object 안에 키가 숫자로 지정되어있는데 이거 뭔지 잘 모르겠다.


    </script>
</body>
</html>